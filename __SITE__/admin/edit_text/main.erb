<% 
ph 
require_form_support

if param(:file_code) && param(:operation) == 'save_texte'
  texte.save
end

%>
<%= header(:small) %>

<h2>Ã‰diteur de texte</h2>

<div id="texte_state"><%= texte.state %></div>
<form id="edit_text_form" action="admin/edit_text" method="POST">
  <input type="hidden" name="operation" value="save_texte" />
  <input type="hidden" name="path" id="file_path" value="<%= texte.path %>" />
  <div>
    <span class="field">
      <textarea name="file_code" id="file_code" rows="40"><%= param(:file_code) %></textarea>
    </span>
  </div>
  <div class="buttons">
    <input type="submit" class="main" id="submit_button" value="Enregistrer" />
  </div>
</form>

<%= footer %>
